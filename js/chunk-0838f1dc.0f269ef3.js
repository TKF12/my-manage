(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0838f1dc"],{"016d":function(e,t,r){},1278:function(e,t,r){"use strict";r("2767")},2767:function(e,t,r){},"39d4":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Add-goods"},[r("a-steps",{attrs:{current:e.current}},e._l(e.steps,(function(e){return r("a-step",{key:e.title,attrs:{title:e.title}})})),1),r("div",{staticClass:"steps-content"},[0===e.current?r("Productinformation",{ref:"productinForm",attrs:{form:e.form}}):1===e.current?r("Salesinformation",{ref:"salesinForm",attrs:{form:e.form}}):e._e()],1),r("div",{staticClass:"steps-action"},[e.current<e.steps.length-1?r("a-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v(" 下一步 ")]):e._e(),e.current==e.steps.length-1?r("a-button",{attrs:{type:"primary"},on:{click:e.addProduct}},[e._v(" 提交 ")]):e._e(),e.current>0?r("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.prev}},[e._v(" 上一步 ")]):e._e()],1)],1)},a=[],i=r("5530"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{attrs:{label:"商品标题",prop:"title"}},[r("a-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("a-form-model-item",{attrs:{label:"商品描述",prop:"desc"}},[r("a-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),r("a-form-model-item",{attrs:{label:"商品类目",prop:"category"}},[r("a-select",{attrs:{placeholder:"选择类目"},on:{change:e.changeItem},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.list,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1),r("a-select",{attrs:{"show-search":"",placeholder:"选择子类目",allowClear:!0,"filter-option":e.filterOption},model:{value:e.form.c_item,callback:function(t){e.$set(e.form,"c_item",t)},expression:"form.c_item"}},e._l(e.items,(function(t){return r("a-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),r("a-form-model-item",{attrs:{label:"商品标签",prop:"tags"}},[r("a-select",{staticStyle:{width:"100%"},attrs:{mode:"tags"},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}})],1)],1)},s=[],l=(r("ac1f"),r("841c"),r("027a")),c={props:["form"],data:function(){return{list:[],items:[],labelCol:{span:4},wrapperCol:{span:14},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],category:[{required:!0,message:"请选择类目",trigger:"change"}],tags:[{required:!0,message:"请选择类目"}]}}},methods:{filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},changeItem:function(e){this.form.c_item=[];for(var t=0;t<this.list.length;t+=1)this.list[t].id===e&&(this.items=this.list[t].c_items),this.items.length<1&&(this.form.c_item=[])}},created:function(){var e=this;l["a"].search().then((function(t){e.list=t.data}))}},u=c,f=r("2877"),m=Object(f["a"])(u,o,s,!1,null,null,null),p=m.exports,d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-form-model",{attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{attrs:{label:"商品售价",prop:"price"}},[r("a-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),r("a-form-model-item",{attrs:{label:"商品折扣价",prop:"price_off"}},[r("a-input",{model:{value:e.form.price_off,callback:function(t){e.$set(e.form,"price_off",t)},expression:"form.price_off"}})],1),r("a-form-model-item",{attrs:{label:"商品库存",prop:"inventory"}},[r("a-input",{model:{value:e.form.inventory,callback:function(t){e.$set(e.form,"inventory",t)},expression:"form.inventory"}})],1),r("a-form-model-item",{attrs:{label:"计量单位",prop:"unit"}},[r("a-input",{model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1),r("div",{staticClass:"clearfix"},[r("a-upload",{attrs:{action:"https://mallapi.duyiedu.com/upload/images?appkey="+e.$store.state.user.appkey,"list-type":"picture-card","file-list":e.fileList,name:"avatar"},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<8?r("div",[r("a-icon",{attrs:{type:"plus"}}),r("div",{staticClass:"ant-upload-text"},[e._v("添加图片")])],1):e._e()]),r("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[r("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)],1)},h=[],v=r("1da1");r("96cf"),r("d3b7"),r("a9e3"),r("d81d"),r("4de4"),r("9129");function g(e,t,r,n){return Number.isNaN(e)?t(r):e<0?t(n):t()}function b(e){return new Promise((function(t,r){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return r(e)}}))}var _={props:["form"],data:function(){var e=this;return{labelCol:{span:4},wrapperCol:{span:14},other:"",rules:{price:[{required:!0,trigger:"blur",transform:function(t){return t.length||(e.form.price=0),Number(t)},validator:function(e,t,r){return g(t,r,"输入格式不正确，请输入数字","价格不能小于0")}}],price_off:[{required:!1,trigger:"blur",transform:function(e){return e.length&&Number(e)},validator:function(e,t,r){return g(t,r,"输入格式不正确，请输入数字","折扣不能小于0")}}],inventory:[{required:!0,trigger:"blur",transform:function(t){return t.length||(e.form.inventory=0),Number(t)},validator:function(e,t,r){return g(t,r,"输入格式不正确，请输入数字")}}],unit:[{required:!0,message:"请填写计量单位",trigger:"blur"}]},previewVisible:!1,previewImage:"",fileList:[]}},created:function(){var e=this.$route.params.Id;e&&(this.fileList=this.form.images.map((function(e,t){return{uid:t,name:"image".concat(t,".png"),status:"done",url:e}})))},methods:{handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e,n.url||n.preview){r.next=5;break}return r.next=4,b(n.originFileObj);case 4:n.preview=r.sent;case 5:t.previewImage=n.url||n.preview,t.previewVisible=!0;case 7:case"end":return r.stop()}}),r)})))()},handleChange:function(e){var t=e.file,r=e.fileList;this.fileList=r,"done"===t.status?this.form.images.push(t.response.data.url):"removed"===t.status&&(console.log("删除"),this.form.images=this.form.images.filter((function(e){return e!==t.response.data.url})))}}},w=_,y=(r("1278"),Object(f["a"])(w,d,h,!1,null,null,null)),x=y.exports,N={components:{Productinformation:p,Salesinformation:x},data:function(){return{form:{title:"",desc:"",category:[],c_item:[],tags:["包邮"],price:0,price_off:"",unit:"",images:[],inventory:0},current:0,steps:[{title:"填写商品基本信息"},{title:"填写商品销售信息"}]}},created:function(){var e=this,t=this.$route.params.Id;t&&l["a"].queryProduct(t).then((function(t){e.form=t}))},methods:{next:function(){var e=this;this.$refs.productinForm.$refs.ruleForm.validate((function(t){return!!t&&(e.current+=1,e.form=Object(i["a"])({},e.$refs.productinForm.form),!0)}))},prev:function(){this.current-=1,this.form=Object(i["a"])(Object(i["a"])({},this.form),this.$refs.salesinForm.form)},addProduct:function(){var e=this,t=this.$route.params.Id;t?l["a"].editProduct(this.form).then((function(){e.$message.success("商品修改成功"),e.$router.push({name:"ProductList"})})):l["a"].addItem(this.form).then((function(){e.$message.success("添加商品成功"),e.$router.push({name:"ProductList"})}))}}},I=N,$=(r("a318"),Object(f["a"])(I,n,a,!1,null,null,null));t["default"]=$.exports},"408a":function(e,t,r){var n=r("e330");e.exports=n(1..valueOf)},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("e330"),a=r("1d80"),i=r("577e"),o=r("5899"),s=n("".replace),l="["+o+"]",c=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),f=function(e){return function(t){var r=i(a(t));return 1&e&&(r=s(r,c,"")),2&e&&(r=s(r,u,"")),r}};e.exports={start:f(1),end:f(2),trim:f(3)}},9129:function(e,t,r){var n=r("23e7");n({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},a318:function(e,t,r){"use strict";r("016d")},a9e3:function(e,t,r){"use strict";var n=r("83ab"),a=r("da84"),i=r("e330"),o=r("94ca"),s=r("6eeb"),l=r("1a2d"),c=r("7156"),u=r("3a9b"),f=r("d9b5"),m=r("c04e"),p=r("d039"),d=r("241c").f,h=r("06cf").f,v=r("9bf2").f,g=r("408a"),b=r("58a8").trim,_="Number",w=a[_],y=w.prototype,x=a.TypeError,N=i("".slice),I=i("".charCodeAt),$=function(e){var t=m(e,"number");return"bigint"==typeof t?t:k(t)},k=function(e){var t,r,n,a,i,o,s,l,c=m(e,"number");if(f(c))throw x("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=b(c),t=I(c,0),43===t||45===t){if(r=I(c,2),88===r||120===r)return NaN}else if(48===t){switch(I(c,1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+c}for(i=N(c,2),o=i.length,s=0;s<o;s++)if(l=I(i,s),l<48||l>a)return NaN;return parseInt(i,n)}return+c};if(o(_,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var C,E=function(e){var t=arguments.length<1?0:w($(e)),r=this;return u(y,r)&&p((function(){g(r)}))?c(Object(t),r,E):t},O=n?d(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),F=0;O.length>F;F++)l(w,C=O[F])&&!l(E,C)&&v(E,C,h(w,C));E.prototype=y,y.constructor=E,s(a,_,E)}}}]);
//# sourceMappingURL=chunk-0838f1dc.0f269ef3.js.map